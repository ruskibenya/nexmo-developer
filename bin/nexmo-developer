#!/usr/bin/env ruby
require 'optparse'


options = {}
docs_path = OptionParser.new do |opts|
  opts.banner = "Usage: nexmo-developer --docs='/path/to/docs'"
  opts.on("-d", "--docs=DOCS", "Specify path to documentation") do |v|
    if Dir.exist?(v)
      ENV['DOCS_BASE_PATH'] = v
      ENV['OAS_PATH'] = "#{v}/_open_api/definitions"
      puts "Documentation path: '#{v}' set successfully."
    else
      puts "Error: --docs parameter value must be equal to a directory containing documentation."
      exit
    end
  end
  opts.on("-h", "--help", "Prints help instructions") do
    puts opts
    exit
  end
end.parse!

$LOAD_PATH.unshift(File.expand_path('../lib/nexmo_developer', __dir__))

ENV['BUNDLE_GEMFILE']='./Gemfile'

APP_PATH = File.expand_path('../lib/nexmo_developer/config/application', __dir__)
require 'config/boot'
require 'rails/command'

Rails::Command.invoke 'server'
